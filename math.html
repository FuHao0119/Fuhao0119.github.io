<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è€ƒç ”æ•°å­¦å…¨å®¶æ¡¶ V3.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; }
        canvas { cursor: crosshair; touch-action: none; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        /* å¢åŠ å…¬å¼æ˜¾ç¤ºçš„è¡Œé«˜ï¼Œé¿å…æ‹¥æŒ¤ */
        .katex-display { margin: 0.5em 0; }
    </style>
</head>
<body class="bg-slate-100 h-screen flex overflow-hidden">

    <aside class="w-64 bg-white shadow-xl flex flex-col z-20">
        <div class="p-6 bg-blue-900 text-white">
            <h1 class="font-bold text-xl tracking-wide">è€ƒç ”æ•°å­¦<br><span class="text-sm font-light text-blue-200">æ ¸å¿ƒå…¬å¼åº“ V3.0</span></h1>
        </div>
        <nav class="flex-1 overflow-y-auto p-4 space-y-1">
            <div class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 px-2 pt-2">å¾®ç§¯åˆ†åŸºç¡€</div>
            <button onclick="selectCategory('limits')" class="nav-btn w-full text-left px-4 py-3 rounded-lg text-sm hover:bg-blue-50 text-gray-700 font-medium transition border-l-4 border-transparent">å¸¸ç”¨æé™ & æ— ç©·å°</button>
            <button onclick="selectCategory('derivative')" class="nav-btn w-full text-left px-4 py-3 rounded-lg text-sm hover:bg-blue-50 text-gray-700 font-medium transition border-l-4 border-transparent">åŸºæœ¬å¯¼æ•°å…¬å¼</button>
            
            <div class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 px-2 pt-4">ç§¯åˆ†å­¦</div>
            <button onclick="selectCategory('integrals_basic')" class="nav-btn w-full text-left px-4 py-3 rounded-lg text-sm hover:bg-blue-50 text-gray-700 font-medium transition border-l-4 border-transparent">ä¸å®šç§¯åˆ†åŸºæœ¬è¡¨</button>
            <button onclick="selectCategory('integrals_sub')" class="nav-btn w-full text-left px-4 py-3 rounded-lg text-sm hover:bg-blue-50 text-gray-700 font-medium transition border-l-4 border-transparent">å‡‘å¾®åˆ† (ç¬¬ä¸€æ¢å…ƒ)</button>
        </nav>
        <div class="p-4 border-t text-xs text-gray-400 text-center bg-gray-50">
            Based on your uploaded images
        </div>
    </aside>

    <main class="flex-1 flex flex-col h-full relative">
        
        <header class="bg-white border-b px-8 py-4 flex justify-between items-center shadow-sm z-10">
            <div>
                <h2 id="current-category-title" class="text-2xl font-bold text-gray-800">è¯·é€‰æ‹©æ¨¡å—</h2>
                <p id="current-desc" class="text-sm text-gray-500 mt-1">ä»å·¦ä¾§èœå•å¼€å§‹ä½ çš„å¤ä¹ </p>
            </div>
            
            <div class="bg-gray-100 p-1 rounded-lg flex space-x-1">
                <button onclick="switchMode('review')" id="tab-review" class="px-5 py-2 rounded-md text-sm font-bold transition-all shadow-sm bg-white text-blue-700 ring-1 ring-black/5">
                    ğŸ“– èƒŒè¯µæ¨¡å¼
                </button>
                <button onclick="switchMode('practice')" id="tab-practice" class="px-5 py-2 rounded-md text-sm font-bold transition-all text-gray-600 hover:text-gray-900">
                    âœï¸ é»˜å†™æ¨¡å¼
                </button>
            </div>
        </header>

        <div class="flex-1 overflow-hidden relative bg-slate-50 p-4 sm:p-6">
            
            <div id="view-review" class="h-full overflow-y-auto pb-20 no-scrollbar hidden">
                <div class="max-w-5xl mx-auto grid grid-cols-1 gap-4" id="review-list">
                    </div>
            </div>

            <div id="view-practice" class="h-full flex flex-col hidden max-w-5xl mx-auto w-full">
                <div class="flex justify-between items-end mb-3 px-1">
                    <span class="text-sm text-gray-500 italic">Tips: é®ä½ç­”æ¡ˆï¼ŒåŠ¨æ‰‹å†™ä¸€éå°è±¡æœ€æ·±</span>
                    <div class="flex space-x-2">
                        <button onclick="clearCanvas()" class="px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 active:scale-95 transition">
                            ğŸ—‘ï¸ æ¸…ç©º
                        </button>
                        <button onclick="nextQuestion()" class="px-4 py-2 bg-blue-600 rounded-lg text-sm font-medium text-white shadow hover:bg-blue-700 active:scale-95 transition">
                            ğŸ² æ¢ä¸€é¢˜
                        </button>
                    </div>
                </div>

                <div class="flex-1 bg-white rounded-2xl shadow-lg border border-gray-200 flex flex-col overflow-hidden">
                    
                    <div class="bg-slate-50 px-6 py-5 border-b border-gray-200 min-h-[80px] flex flex-col justify-center">
                        <span class="text-xs font-bold text-blue-500 uppercase tracking-wide mb-1">Current Question</span>
                        <div id="question-text" class="text-xl md:text-2xl font-serif text-gray-800"></div>
                    </div>

                    <div class="flex-1 relative bg-white cursor-crosshair touch-none" id="canvas-container">
                        <canvas id="drawing-board" class="w-full h-full block"></canvas>
                        <div class="absolute inset-0 pointer-events-none flex items-center justify-center opacity-[0.03]">
                            <svg class="w-32 h-32 text-black" fill="currentColor" viewBox="0 0 24 24"><path d="M3 3h18v18H3V3zm2 2v14h14V5H5z"/></svg>
                        </div>
                    </div>

                    <div class="p-5 border-t border-gray-100 bg-white z-10">
                        <div id="answer-section" class="hidden mb-4 animate-fade-in">
                            <div class="p-4 bg-green-50 rounded-xl border border-green-100 flex flex-col sm:flex-row items-center gap-4">
                                <span class="bg-green-200 text-green-800 text-xs font-bold px-2 py-1 rounded">æ ‡å‡†ç­”æ¡ˆ</span>
                                <div id="katex-answer" class="text-xl text-gray-900 overflow-x-auto"></div>
                            </div>
                            <div class="grid grid-cols-2 gap-4 mt-4">
                                <button onclick="recordResult(false)" class="py-3 rounded-lg border border-red-200 bg-red-50 text-red-700 font-bold hover:bg-red-100 transition">ğŸ˜– æ²¡è®°ä½</button>
                                <button onclick="recordResult(true)" class="py-3 rounded-lg bg-green-600 text-white font-bold hover:bg-green-700 shadow-lg shadow-green-200 transition">ğŸ˜ è®°ä½äº†</button>
                            </div>
                        </div>

                        <button id="show-answer-btn" onclick="showAnswer()" class="w-full py-4 bg-gray-900 hover:bg-black text-white rounded-xl font-bold text-lg shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5">
                            ğŸ‘€ æŸ¥çœ‹ç­”æ¡ˆ
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // --- æ ¸å¿ƒæ•°æ® (å®Œå…¨åŸºäºç”¨æˆ·æä¾›çš„å›¾ç‰‡å½•å…¥) ---
        const formulaData = {
            'limits': [
                { q: "é‡è¦æé™ï¼šx->0, sin(x)/x", a: "\\lim_{x\\to 0} \\frac{\\sin x}{x} = 1" },
                { q: "é‡è¦æé™ï¼šx->0, (1+x)^(1/x)", a: "\\lim_{x\\to 0} (1+x)^{\\frac{1}{x}} = e" },
                { q: "é‡è¦æé™ï¼šx->âˆ, (1+1/x)^x", a: "\\lim_{x\\to \\infty} (1+\\frac{1}{x})^x = e" },
                { q: "é‡è¦æé™ï¼šx->0, (a^x - 1)/x", a: "\\lim_{x\\to 0} \\frac{a^x - 1}{x} = \\ln a" },
                { q: "æé™ï¼šn->âˆ, nå¼€næ¬¡æ–¹", a: "\\lim_{n\\to \\infty} \\sqrt[n]{n} = 1" },
                { q: "æé™ï¼šn->âˆ, aå¼€næ¬¡æ–¹ (a>0)", a: "\\lim_{n\\to \\infty} \\sqrt[n]{a} = 1" },
                { q: "x->0 ç­‰ä»·æ— ç©·å°ï¼šsin x ~ ?", a: "x" },
                { q: "x->0 ç­‰ä»·æ— ç©·å°ï¼štan x ~ ?", a: "x" },
                { q: "x->0 ç­‰ä»·æ— ç©·å°ï¼šarcsin x ~ ?", a: "x" },
                { q: "x->0 ç­‰ä»·æ— ç©·å°ï¼šarctan x ~ ?", a: "x" },
                { q: "x->0 ç­‰ä»·æ— ç©·å°ï¼šln(1+x) ~ ?", a: "x" },
                { q: "x->0 ç­‰ä»·æ— ç©·å°ï¼še^x - 1 ~ ?", a: "x" },
                { q: "x->0 ç­‰ä»·æ— ç©·å°ï¼š(1+x)^a - 1 ~ ?", a: "ax" },
                { q: "x->0 ç­‰ä»·æ— ç©·å°ï¼š1 - cos x ~ ?", a: "\\frac{1}{2}x^2" },
                { q: "x->0 ç­‰ä»·æ— ç©·å°ï¼ša^x - 1 ~ ?", a: "x \\ln a" },
                { q: "é«˜é˜¶å°é‡ï¼šx - sin x ~ ?", a: "\\frac{1}{6}x^3" },
                { q: "é«˜é˜¶å°é‡ï¼štan x - x ~ ?", a: "\\frac{1}{3}x^3" },
                { q: "é«˜é˜¶å°é‡ï¼šx - ln(1+x) ~ ?", a: "\\frac{1}{2}x^2" },
                { q: "é«˜é˜¶å°é‡ï¼šarcsin x - x ~ ?", a: "\\frac{1}{6}x^3" },
                { q: "é«˜é˜¶å°é‡ï¼šx - arctan x ~ ?", a: "\\frac{1}{3}x^3" }
            ],
            'derivative': [
                { q: "å¸¸æ•°å¯¼æ•° C'", a: "0" },
                { q: "å¹‚å‡½æ•° (x^u)'", a: "u x^{u-1}" },
                { q: "æŒ‡æ•°å‡½æ•° (a^x)'", a: "a^x \\ln a" },
                { q: "æŒ‡æ•°å‡½æ•° (e^x)'", a: "e^x" },
                { q: "å¯¹æ•°å‡½æ•° (log_a x)'", a: "\\frac{1}{x \\ln a}" },
                { q: "å¯¹æ•°å‡½æ•° (ln|x|)'", a: "\\frac{1}{x}" },
                { q: "æ­£å¼¦ (sin x)'", a: "\\cos x" },
                { q: "ä½™å¼¦ (cos x)'", a: "-\\sin x" },
                { q: "æ­£åˆ‡ (tan x)'", a: "\\sec^2 x" },
                { q: "ä½™åˆ‡ (cot x)'", a: "-\\csc^2 x" },
                { q: "æ­£å‰² (sec x)'", a: "\\sec x \\tan x" },
                { q: "ä½™å‰² (csc x)'", a: "-\\csc x \\cot x" },
                { q: "åæ­£å¼¦ (arcsin x)'", a: "\\frac{1}{\\sqrt{1-x^2}}" },
                { q: "åä½™å¼¦ (arccos x)'", a: "-\\frac{1}{\\sqrt{1-x^2}}" },
                { q: "åæ­£åˆ‡ (arctan x)'", a: "\\frac{1}{1+x^2}" },
                { q: "åä½™åˆ‡ (arccot x)'", a: "-\\frac{1}{1+x^2}" }
            ],
            'integrals_basic': [
                { q: "âˆ« 0 dx", a: "C" },
                { q: "âˆ« x^u dx (uâ‰ -1)", a: "\\frac{1}{u+1}x^{u+1} + C" },
                { q: "âˆ« 1/x dx", a: "\\ln|x| + C" },
                { q: "âˆ« a^x dx", a: "\\frac{a^x}{\\ln a} + C" },
                { q: "âˆ« e^x dx", a: "e^x + C" },
                { q: "âˆ« sin x dx", a: "-\\cos x + C" },
                { q: "âˆ« cos x dx", a: "\\sin x + C" },
                { q: "âˆ« sec^2 x dx", a: "\\tan x + C" },
                { q: "âˆ« csc^2 x dx", a: "-\\cot x + C" },
                { q: "âˆ« sec x tan x dx", a: "\\sec x + C" },
                { q: "âˆ« csc x cot x dx", a: "-\\csc x + C" },
                { q: "âˆ« 1/âˆš(1-x^2) dx", a: "\\arcsin x + C" },
                { q: "âˆ« 1/(1+x^2) dx", a: "\\arctan x + C" },
                { q: "âˆ« 1/âˆš(a^2-x^2) dx", a: "\\arcsin \\frac{x}{a} + C" },
                { q: "âˆ« 1/(a^2+x^2) dx", a: "\\frac{1}{a} \\arctan \\frac{x}{a} + C" },
                { q: "âˆ« 1/(x^2-a^2) dx (å¹³æ–¹å·®)", a: "\\frac{1}{2a} \\ln |\\frac{x-a}{x+a}| + C" },
                { q: "âˆ« 1/âˆš(x^2+a^2) dx", a: "\\ln(x+\\sqrt{x^2+a^2}) + C" },
                { q: "âˆ« 1/âˆš(x^2-a^2) dx", a: "\\ln|x+\\sqrt{x^2-a^2}| + C" },
                { q: "âˆ« sec x dx", a: "\\ln|\\sec x + \\tan x| + C" },
                { q: "âˆ« csc x dx", a: "-\\ln|\\csc x + \\cot x| + C" } 
            ],
            'integrals_sub': [
                { q: "å‡‘çº¿æ€§ï¼šâˆ« f(ax+b) dx -> d(?)", a: "\\frac{1}{a} \\int f(ax+b) d(ax+b)" },
                { q: "å‡‘å¹‚ï¼šâˆ« x^m f(ax^(m+1)+b) dx -> d(?)", a: "\\frac{1}{(m+1)a} \\int f(ax^{m+1}+b) d(ax^{m+1}+b)" },
                { q: "å‡‘æ ¹å·ï¼šâˆ« f(âˆšx)/âˆšx dx -> d(?)", a: "2 \\int f(\\sqrt{x}) d(\\sqrt{x})" },
                { q: "å‡‘æŒ‡æ•°ï¼šâˆ« f(e^x)e^x dx -> d(?)", a: "\\int f(e^x) d(e^x)" },
                { q: "å‡‘å¯¹æ•°ï¼šâˆ« f(ln x) * 1/x dx -> d(?)", a: "\\int f(\\ln x) d(\\ln x)" },
                { q: "å‡‘æ­£å¼¦ï¼šâˆ« f(sin x) cos x dx -> d(?)", a: "\\int f(\\sin x) d(\\sin x)" },
                { q: "å‡‘ä½™å¼¦ï¼šâˆ« f(cos x) sin x dx -> d(?)", a: "-\\int f(\\cos x) d(\\cos x)" },
                { q: "å‡‘æ­£åˆ‡ï¼šâˆ« f(tan x) * sec^2 x dx -> d(?)", a: "\\int f(\\tan x) d(\\tan x)" },
                { q: "å‡‘åæ­£å¼¦ï¼šâˆ« f(arcsin x) / âˆš(1-x^2) dx", a: "\\int f(\\arcsin x) d(\\arcsin x)" },
                { q: "å‡‘åæ­£åˆ‡ï¼šâˆ« f(arctan x) / (1+x^2) dx", a: "\\int f(\\arctan x) d(\\arctan x)" }
            ]
        };

        let currentCategory = 'limits';
        let currentMode = 'review';
        let currentItem = null;

        // åˆå§‹åŒ–
        function init() {
            selectCategory('integrals_basic'); // é»˜è®¤å±•ç¤ºæœ€é‡è¦çš„ç§¯åˆ†è¡¨
        }

        function selectCategory(key) {
            currentCategory = key;
            const titles = {
                'limits': 'å¸¸ç”¨æé™ä¸ç­‰ä»·æ— ç©·å°', 
                'derivative': 'åŸºæœ¬å¯¼æ•°å…¬å¼ (16ä¸ª)', 
                'integrals_basic': 'ä¸å®šç§¯åˆ†åŸºæœ¬å…¬å¼ (20ä¸ª)', 
                'integrals_sub': 'ç¬¬ä¸€ç±»æ¢å…ƒæ³• (å‡‘å¾®åˆ†)'
            };
            const descs = {
                'limits': 'åŒ…å«æ³°å‹’å…¬å¼æ¨å¯¼çš„é«˜é˜¶æ— ç©·å°ï¼Œåšæé™é¢˜å¿…å¤‡ã€‚',
                'derivative': 'èƒŒç†Ÿè¿™äº›ï¼Œæ´›å¿…è¾¾æ³•åˆ™å’Œæ³°å‹’å±•å¼€æ‰èƒ½ç®—å¾—å¿«ã€‚',
                'integrals_basic': 'è€ƒç ”æ•°å­¦çš„ä¹é˜³ç¥åŠŸï¼Œç‰¹åˆ«æ˜¯æœ€åå‡ ä¸ªå¸¦æ ¹å·å’Œå¹³æ–¹çš„ã€‚',
                'integrals_sub': 'çœ‹è§å¯¼æ•°å‡‘å¾®åˆ†ï¼Œè¿™æ˜¯è§£å†³å¤æ‚ç§¯åˆ†çš„ç¬¬ä¸€æ­¥ã€‚'
            };

            document.getElementById('current-category-title').innerText = titles[key];
            document.getElementById('current-desc').innerText = descs[key];
            
            // é«˜äº®å·¦ä¾§èœå•
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('bg-blue-50', 'border-blue-500', 'text-blue-700');
                btn.classList.add('border-transparent');
            });
            // ç®€å•åŒ¹é…
            const allBtns = document.querySelectorAll('.nav-btn');
            for(let btn of allBtns) {
                if(btn.innerText.includes(titles[key].split(' ')[0]) || (key==='integrals_sub' && btn.innerText.includes('å‡‘å¾®åˆ†'))) {
                    btn.classList.add('bg-blue-50', 'border-blue-500', 'text-blue-700');
                    btn.classList.remove('border-transparent');
                }
            }

            if (currentMode === 'review') renderReviewList();
            else nextQuestion();
        }

        function switchMode(mode) {
            currentMode = mode;
            const reviewBtn = document.getElementById('tab-review');
            const practiceBtn = document.getElementById('tab-practice');
            const reviewView = document.getElementById('view-review');
            const practiceView = document.getElementById('view-practice');

            if (mode === 'review') {
                toggleStyle(reviewBtn, true);
                toggleStyle(practiceBtn, false);
                reviewView.classList.remove('hidden');
                practiceView.classList.add('hidden');
                renderReviewList();
            } else {
                toggleStyle(practiceBtn, true);
                toggleStyle(reviewBtn, false);
                practiceView.classList.remove('hidden');
                reviewView.classList.add('hidden');
                if (!currentItem) nextQuestion();
                setTimeout(resizeCanvas, 50);
            }
        }

        function toggleStyle(btn, isActive) {
            if (isActive) {
                btn.classList.add('bg-white', 'text-blue-700', 'ring-1', 'ring-black/5', 'shadow-sm');
                btn.classList.remove('text-gray-600', 'hover:text-gray-900');
            } else {
                btn.classList.remove('bg-white', 'text-blue-700', 'ring-1', 'ring-black/5', 'shadow-sm');
                btn.classList.add('text-gray-600', 'hover:text-gray-900');
            }
        }

        function renderReviewList() {
            const listContainer = document.getElementById('review-list');
            listContainer.innerHTML = '';
            
            const list = formulaData[currentCategory];
            list.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = "bg-white p-4 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition duration-200 flex flex-col md:flex-row md:items-center gap-4";
                
                const indexBadge = document.createElement('div');
                indexBadge.className = "hidden md:flex flex-shrink-0 w-8 h-8 bg-blue-50 text-blue-600 rounded-full items-center justify-center font-bold text-sm";
                indexBadge.innerText = index + 1;

                const contentDiv = document.createElement('div');
                contentDiv.className = "flex-1";
                
                const qDiv = document.createElement('div');
                qDiv.className = "text-xs font-bold text-gray-400 uppercase tracking-wider mb-1";
                qDiv.innerText = item.q;

                const aDiv = document.createElement('div');
                aDiv.className = "text-lg text-gray-800 overflow-x-auto";
                
                contentDiv.appendChild(qDiv);
                contentDiv.appendChild(aDiv);
                
                card.appendChild(indexBadge);
                card.appendChild(contentDiv);
                listContainer.appendChild(card);

                katex.render(item.a, aDiv, { throwOnError: false, displayMode: index > -1 }); // å¼€å¯ displayMode è®©å…¬å¼æ›´èˆ’å±•
            });
        }

        function nextQuestion() {
            const list = formulaData[currentCategory];
            const randomIndex = Math.floor(Math.random() * list.length);
            currentItem = list[randomIndex];

            document.getElementById('question-text').innerText = currentItem.q;
            document.getElementById('answer-section').classList.add('hidden');
            document.getElementById('show-answer-btn').classList.remove('hidden');
            document.getElementById('katex-answer').innerHTML = '';
            
            clearCanvas();
        }

        function showAnswer() {
            const answerDiv = document.getElementById('katex-answer');
            katex.render(currentItem.a, answerDiv, {
                throwOnError: false,
                displayMode: true
            });
            document.getElementById('answer-section').classList.remove('hidden');
            document.getElementById('show-answer-btn').classList.add('hidden');
        }

        function recordResult(isCorrect) {
            nextQuestion();
        }

        // ç”»æ¿é€»è¾‘ (ä¿æŒç¨³å®š)
        const canvas = document.getElementById('drawing-board');
        const ctx = canvas.getContext('2d');
        let isDrawing = false;
        let lastX = 0, lastY = 0;

        function resizeCanvas() {
            const container = document.getElementById('canvas-container');
            if (container.clientWidth === 0) return;
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
            ctx.lineJoin = 'round';
            ctx.lineCap = 'round';
            ctx.lineWidth = 3; // ç¬”ç”»æ›´ç»†ä¸€ç‚¹
            ctx.strokeStyle = '#0f172a'; // å¢¨è‰²
        }
        window.addEventListener('resize', resizeCanvas);

        function getPos(e) {
            const rect = canvas.getBoundingClientRect();
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;
            return { x: clientX - rect.left, y: clientY - rect.top };
        }

        function startDraw(e) {
            isDrawing = true;
            const pos = getPos(e);
            lastX = pos.x; lastY = pos.y;
            if(e.type === 'touchstart') e.preventDefault();
        }
        function draw(e) {
            if (!isDrawing) return;
            const pos = getPos(e);
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(pos.x, pos.y);
            ctx.stroke();
            lastX = pos.x; lastY = pos.y;
            if(e.type === 'touchmove') e.preventDefault();
        }
        function stopDraw() { isDrawing = false; }
        function clearCanvas() { ctx.clearRect(0, 0, canvas.width, canvas.height); }

        canvas.addEventListener('mousedown', startDraw);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDraw);
        canvas.addEventListener('mouseout', stopDraw);
        canvas.addEventListener('touchstart', startDraw, {passive: false});
        canvas.addEventListener('touchmove', draw, {passive: false});
        canvas.addEventListener('touchend', stopDraw);

        init();
    </script>
</body>
</html>
